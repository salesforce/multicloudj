apiVersion: v1
kind: Namespace
metadata:
  name: multicloudj
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: multicloudj-config
  namespace: multicloudj
data:
  BUCKET_NAME: "palsfdc"
  BUCKET_REGION: "us-west2"
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: multicloudj-examples
  namespace: multicloudj
  labels:
    app: multicloudj-examples
spec:
  replicas: 1
  selector:
    matchLabels:
      app: multicloudj-examples
  template:
    metadata:
      labels:
        app: multicloudj-examples
    spec:
      serviceAccountName: default
      containers:
      - name: multicloudj
        image: gcr.io/substrate-sdk-gcp-poc1/multicloudj-examples:latest
        imagePullPolicy: Always
        envFrom:
        - configMapRef:
            name: multicloudj-config
        resources:
          requests:
            memory: "512Mi"
            cpu: "250m"
          limits:
            memory: "1Gi"
            cpu: "500m"
        # Note: This is a job-like workload - it runs once and completes
        # For continuous running, you'd add a sleep loop or change the application logic
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: multicloudj-sa
  namespace: multicloudj
  annotations:
    iam.gke.io/gcp-service-account: chameleon@substrate-sdk-gcp-poc1.iam.gserviceaccount.com

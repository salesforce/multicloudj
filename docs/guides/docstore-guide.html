<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/multicloudj/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/multicloudj/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(3)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(3) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(3) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list { display: block; } </style> <script src="/multicloudj/assets/js/vendor/lunr.min.js"></script> <script src="/multicloudj/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>How to Docstore | MulticloudJ</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="How to Docstore" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Substrate Agnostic Cloud SDK for Java" /> <meta property="og:description" content="Substrate Agnostic Cloud SDK for Java" /> <link rel="canonical" href="https://opensource.salesforce.com/multicloudj/guides/docstore-guide.html" /> <meta property="og:url" content="https://opensource.salesforce.com/multicloudj/guides/docstore-guide.html" /> <meta property="og:site_name" content="MulticloudJ" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="How to Docstore" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Substrate Agnostic Cloud SDK for Java","headline":"How to Docstore","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://opensource.salesforce.com/multicloudj/assets/images/multicloudj-logo.png"}},"url":"https://opensource.salesforce.com/multicloudj/guides/docstore-guide.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/multicloudj/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="MulticloudJ"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/multicloudj/" class="nav-list-link">MultiCloudJ Overview</a></li><li class="nav-list-item"><a href="/multicloudj/getting-started/" class="nav-list-link">Getting Started</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Usage Guides category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/multicloudj/guides/" class="nav-list-link">Usage Guides</a><ul class="nav-list"><li class="nav-list-item"><a href="/multicloudj/guides/sts-guide.html" class="nav-list-link">How to STS</a></li><li class="nav-list-item"><a href="/multicloudj/guides/blobstore-guide.html" class="nav-list-link">How to Blob store</a></li><li class="nav-list-item"><a href="/multicloudj/guides/docstore-guide.html" class="nav-list-link">How to Docstore</a></li><li class="nav-list-item"><a href="/multicloudj/guides/conformance-tests-guide.html" class="nav-list-link">How to: Conformance tests in multicloudj</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Design category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/multicloudj/design/" class="nav-list-link">Design</a><ul class="nav-list"><li class="nav-list-item"><a href="/multicloudj/design/layers.html" class="nav-list-link">Layers</a></li><li class="nav-list-item"><a href="/multicloudj/design/flexibility.html" class="nav-list-link">Flexibility</a></li><li class="nav-list-item"><a href="/multicloudj/design/errors.html" class="nav-list-link">Exception Handling</a></li></ul></li><li class="nav-list-item"><a href="/multicloudj/api-java-doc.html" class="nav-list-link">Api Documentation</a></li></ul> </nav> <hr> <p style="text-align: center; font-size: 0.8rem; color: #aaa;"> This site if maintained by the MulticloudJ team. </p> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search MulticloudJ" aria-label="Search MulticloudJ" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/multicloudj/guides/">Usage Guides</a></li> <li class="breadcrumb-nav-list-item"><span>How to Docstore</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="docstore"> <a href="#docstore" class="anchor-heading" aria-labelledby="docstore"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Docstore </h1> <p>The <code class="language-plaintext highlighter-rouge">DocStoreClient</code> class in the <code class="language-plaintext highlighter-rouge">multicloudj</code> library provides a portable document store like abstraction over NoSQSL database providers like Amazon DynamoDB, Alibaba Tablestore, and Google Firestore. It supports core document operations like create, read, update, delete (CRUD), batching, and querying with the support of indexing.</p> <p>Internally, each provider is implemented via a driver extending <code class="language-plaintext highlighter-rouge">AbstractDocStore</code>.</p> <h2 id="feature-support-across-providers"> <a href="#feature-support-across-providers" class="anchor-heading" aria-labelledby="feature-support-across-providers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Feature Support Across Providers </h2> <h3 id="core-api-features"> <a href="#core-api-features" class="anchor-heading" aria-labelledby="core-api-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Core API Features </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Feature Name</th> <th>GCP Firestore</th> <th>AWS DynamoDB</th> <th>ALI Tablestore</th> <th>Comments</th> </tr> </thead> <tbody> <tr> <td><strong>Create Document</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Insert new documents</td> </tr> <tr> <td><strong>Get Document</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Get the document by key</td> </tr> <tr> <td><strong>Put Document</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Insert or replace document</td> </tr> <tr> <td><strong>Replace Document</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Replace existing document</td> </tr> <tr> <td><strong>Delete Document</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Remove document by key</td> </tr> <tr> <td><strong>Update Document</strong></td> <td>‚è±Ô∏è Coming Soon</td> <td>‚è±Ô∏è Coming Soon</td> <td>‚è±Ô∏è Coming Soon</td> <td>Update operations not yet implemented in any provider</td> </tr> </tbody> </table></div> <h3 id="batch-operations"> <a href="#batch-operations" class="anchor-heading" aria-labelledby="batch-operations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Batch Operations </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Feature Name</th> <th>GCP Firestore</th> <th>AWS DynamoDB</th> <th>ALI Tablestore</th> <th>Comments</th> </tr> </thead> <tbody> <tr> <td><strong>Batch Get</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Retrieve multiple documents in one call</td> </tr> <tr> <td><strong>Batch Write</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Write multiple documents atomically</td> </tr> <tr> <td><strong>Atommic Writes</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Atomic write operations across multiple documents</td> </tr> </tbody> </table></div> <h3 id="query-features"> <a href="#query-features" class="anchor-heading" aria-labelledby="query-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Query Features </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Feature Name</th> <th>GCP Firestore</th> <th>AWS DynamoDB</th> <th>ALI Tablestore</th> <th>Comments</th> </tr> </thead> <tbody> <tr> <td><strong>Basic Queries</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Filter and projection queries</td> </tr> <tr> <td><strong>Compound Filters</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Multiple filter conditions</td> </tr> <tr> <td><strong>Order By</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Sort query results</td> </tr> <tr> <td><strong>Order By in Full Scan</strong></td> <td>‚ùå <strong>Not Supported</strong></td> <td>‚ùå <strong>Not Supported</strong></td> <td>‚ùå <strong>Not Supported</strong></td> <td>** It‚Äôs too expensive **</td> </tr> <tr> <td><strong>Pagination Token</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>üìÖ In Roadmap</td> <td>Query with pagination</td> </tr> <tr> <td><strong>Limit/Offset</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Pagination support</td> </tr> <tr> <td><strong>Index-based Queries</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Query using secondary indexes</td> </tr> <tr> <td><strong>Query Planning</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Explain query execution plans</td> </tr> </tbody> </table></div> <h3 id="advanced-features"> <a href="#advanced-features" class="anchor-heading" aria-labelledby="advanced-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Advanced Features </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Feature Name</th> <th>GCP Firestore</th> <th>AWS DynamoDB</th> <th>ALI Tablestore</th> <th>Comments</th> </tr> </thead> <tbody> <tr> <td><strong>Revision/Versioning</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Optimistic concurrency control</td> </tr> <tr> <td><strong>Single Key Collections</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Collections with only partition key</td> </tr> <tr> <td><strong>Two Key Collections</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Collections with partition + sort key(uses indexes in firestore)</td> </tr> </tbody> </table></div> <h3 id="configuration-options"> <a href="#configuration-options" class="anchor-heading" aria-labelledby="configuration-options"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration Options </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Configuration</th> <th>GCP Firestore</th> <th>AWS DynamoDB</th> <th>ALI Tablestore</th> <th>Comments</th> </tr> </thead> <tbody> <tr> <td><strong>Regional Support</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Region-specific operations</td> </tr> <tr> <td><strong>Custom Endpoints</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Override default service endpoints</td> </tr> <tr> <td><strong>Credentials Override</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>üìÖ In Roadmap</td> <td>Custom credential providers via STS</td> </tr> <tr> <td><strong>Collection Options</strong></td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>‚úÖ Supported</td> <td>Table/collection configuration</td> </tr> </tbody> </table></div> <h3 id="important-notes-about-semantics"> <a href="#important-notes-about-semantics" class="anchor-heading" aria-labelledby="important-notes-about-semantics"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Important Notes about semantics: </h3> <ol> <li>If you are using in-equality filters (&lt;, &gt;, &lt;=, &gt;=) in query, make sure to put an order by on the same fields to get the consistent results. This is the limitation from gcp firestore (<a href="https://firebase.google.com/docs/firestore/query-data/order-limit-data">ref</a>).</li> <li>Nested Maps, List types are not supported in Alibaba. If your service is targeting alibaba as well, please consider serializing it yourself for this use-case.</li> <li>Atomic writes doesn‚Äôt support global transaction (across partition keys) across alibaba.</li> </ol> <h2 id="creating-a-client"> <a href="#creating-a-client" class="anchor-heading" aria-labelledby="creating-a-client"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a Client </h2> <p>To begin using <code class="language-plaintext highlighter-rouge">DocStoreClient</code>, use the static builder:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">CollectionOptions</span> <span class="n">collectionOptions</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CollectionOptions</span><span class="o">.</span><span class="na">CollectionOptionsBuilder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">withTableName</span><span class="o">(</span><span class="s">"chameleon-test"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">withPartitionKey</span><span class="o">(</span><span class="s">"pName"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">withSortKey</span><span class="o">(</span><span class="s">"s"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">withRevisionField</span><span class="o">(</span><span class="s">"docRevision"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">();</span>

<span class="nc">DocStoreClient</span> <span class="n">client</span>  <span class="o">=</span> <span class="nc">DocStoreClient</span><span class="o">.</span><span class="na">builder</span><span class="o">(</span><span class="s">"aws"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">withRegion</span><span class="o">(</span><span class="s">"us-west-2"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">withCollectionOptions</span><span class="o">(</span><span class="n">collectionOptions</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</code></pre></div></div> <h2 id="document-representation"> <a href="#document-representation" class="anchor-heading" aria-labelledby="document-representation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Document Representation </h2> <p>The <code class="language-plaintext highlighter-rouge">Document</code> class accepts either a user-defined class or a generic map.</p> <h3 id="option-1-using-a-pojo-player"> <a href="#option-1-using-a-pojo-player" class="anchor-heading" aria-labelledby="option-1-using-a-pojo-player"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Option 1: Using a POJO (Player) </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@AllArgsConstructor</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@Data</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Player</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">pName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">float</span> <span class="n">f</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">b</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">s</span><span class="o">;</span>
<span class="o">}</span>

<span class="nc">Player</span> <span class="n">player</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Player</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="mf">99.5f</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="s">"metadata"</span><span class="o">);</span>
<span class="nc">Document</span> <span class="n">doc</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Document</span><span class="o">(</span><span class="n">player</span><span class="o">);</span>
</code></pre></div></div> <h3 id="option-2-using-a-hashmap"> <a href="#option-2-using-a-hashmap" class="anchor-heading" aria-labelledby="option-2-using-a-hashmap"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Option 2: Using a HashMap </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
<span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"pName"</span><span class="o">,</span> <span class="s">"Alice"</span><span class="o">);</span>
<span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"i"</span><span class="o">,</span> <span class="mi">42</span><span class="o">);</span>
<span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"f"</span><span class="o">,</span> <span class="mf">99.5f</span><span class="o">);</span>
<span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"b"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
<span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"s"</span><span class="o">,</span> <span class="s">"metadata"</span><span class="o">);</span>

<span class="nc">Document</span> <span class="n">doc</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Document</span><span class="o">(</span><span class="n">map</span><span class="o">);</span>
</code></pre></div></div> <h2 id="actions"> <a href="#actions" class="anchor-heading" aria-labelledby="actions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Actions </h2> <p>Once you have initialized a docstore client, you can call action methods on it to read, modify, and write documents. These are referred to as <strong>actions</strong>, and can be executed individually or as part of a batch using an action list.</p> <p>DocStore supports the following types of actions:</p> <ul> <li><strong>Get</strong> retrieves a document.</li> <li><strong>Create</strong> creates a new document.</li> <li><strong>Replace</strong> replaces an existing document.</li> <li><strong>Put</strong> puts a document whether or not it already exists.</li> <li><strong>Update</strong> applies modifications to a document (not supported yet).</li> <li><strong>Delete</strong> deletes a document.</li> </ul> <p>Each of the following examples illustrates one of these actions.</p> <h2 id="basic-operations"> <a href="#basic-operations" class="anchor-heading" aria-labelledby="basic-operations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Basic Operations </h2> <h3 id="create"> <a href="#create" class="anchor-heading" aria-labelledby="create"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create </h3> <p>Create will throw an exception <code class="language-plaintext highlighter-rouge">ResourceAlreadyExists</code> if the document already exists.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">client</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">doc</span><span class="o">);</span>
</code></pre></div></div> <h3 id="get"> <a href="#get" class="anchor-heading" aria-labelledby="get"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Get </h3> <p>To retrieve a document, you must provide a <code class="language-plaintext highlighter-rouge">Document</code> initialized with the corresponding object and pre-populate the fields that uniquely identify it (e.g., partition key and sort key):</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Player</span> <span class="n">player</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Player</span><span class="o">();</span>
<span class="n">player</span><span class="o">.</span><span class="na">setPName</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">);</span> <span class="c1">// Assuming pName is the partition key</span>
<span class="n">player</span><span class="o">.</span><span class="na">setS</span><span class="o">(</span><span class="s">"metadata"</span><span class="o">);</span>   <span class="c1">// Assuming s is the sort key</span>

<span class="n">client</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="k">new</span> <span class="nc">Document</span><span class="o">(</span><span class="n">player</span><span class="o">));</span>
</code></pre></div></div> <p>With optional fields you want to retrieve:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">client</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="k">new</span> <span class="nc">Document</span><span class="o">(</span><span class="n">player</span><span class="o">),</span> <span class="s">"pName"</span><span class="o">,</span> <span class="s">"f"</span><span class="o">);</span>
</code></pre></div></div> <h3 id="replace"> <a href="#replace" class="anchor-heading" aria-labelledby="replace"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Replace </h3> <p>Replaces the existing doc, will throw <code class="language-plaintext highlighter-rouge">ResourceNotFound</code> is the document doesn‚Äôt exist.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">client</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="n">doc</span><span class="o">);</span>
</code></pre></div></div> <h3 id="put"> <a href="#put" class="anchor-heading" aria-labelledby="put"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Put </h3> <p>Put is similar to create but will not throw in case the document doesn‚Äôt exist.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">client</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">doc</span><span class="o">);</span>
</code></pre></div></div> <h3 id="delete"> <a href="#delete" class="anchor-heading" aria-labelledby="delete"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Delete </h3> <p>To delete a document, the input must also have the required key fields populated:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Player</span> <span class="n">player</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Player</span><span class="o">();</span>
<span class="n">player</span><span class="o">.</span><span class="na">setPName</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">);</span>
<span class="n">player</span><span class="o">.</span><span class="na">setS</span><span class="o">(</span><span class="s">"metadata"</span><span class="o">);</span>

<span class="n">client</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="k">new</span> <span class="nc">Document</span><span class="o">(</span><span class="n">player</span><span class="o">));</span>
</code></pre></div></div> <h3 id="update-not-supported"> <a href="#update-not-supported" class="anchor-heading" aria-labelledby="update-not-supported"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Update (Not Supported) </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">client</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">doc</span><span class="o">,</span> <span class="nc">Map</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"f"</span><span class="o">,</span> <span class="mf">120.0f</span><span class="o">));</span> <span class="c1">// Throws UnSupportedOperationException</span>
</code></pre></div></div> <h2 id="batch-operations-1"> <a href="#batch-operations-1" class="anchor-heading" aria-labelledby="batch-operations-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Batch Operations </h2> <h3 id="batch-get"> <a href="#batch-get" class="anchor-heading" aria-labelledby="batch-get"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Batch Get </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Document</span><span class="o">&gt;</span> <span class="n">docs</span> <span class="o">=</span> <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">Document</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">"pName"</span><span class="o">,</span> <span class="s">"Alice"</span><span class="o">).</span><span class="na">put</span><span class="o">(</span><span class="s">"s"</span><span class="o">,</span> <span class="s">"metadata"</span><span class="o">),</span>
    <span class="k">new</span> <span class="nf">Document</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">"pName"</span><span class="o">,</span> <span class="s">"Bob"</span><span class="o">).</span><span class="na">put</span><span class="o">(</span><span class="s">"s"</span><span class="o">,</span> <span class="s">"stats"</span><span class="o">)</span>
<span class="o">);</span>
<span class="n">client</span><span class="o">.</span><span class="na">batchGet</span><span class="o">(</span><span class="n">docs</span><span class="o">);</span>
</code></pre></div></div> <h3 id="batch-put"> <a href="#batch-put" class="anchor-heading" aria-labelledby="batch-put"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Batch Put </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Document</span><span class="o">&gt;</span> <span class="n">docs</span> <span class="o">=</span> <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">Document</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">"pName"</span><span class="o">,</span> <span class="s">"Alice"</span><span class="o">).</span><span class="na">put</span><span class="o">(</span><span class="s">"f"</span><span class="o">,</span> <span class="mf">10.5f</span><span class="o">),</span>
    <span class="k">new</span> <span class="nf">Document</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">"pName"</span><span class="o">,</span> <span class="s">"Bob"</span><span class="o">).</span><span class="na">put</span><span class="o">(</span><span class="s">"f"</span><span class="o">,</span> <span class="mf">20.0f</span><span class="o">)</span>
<span class="o">);</span>
<span class="n">client</span><span class="o">.</span><span class="na">batchPut</span><span class="o">(</span><span class="n">docs</span><span class="o">);</span>
</code></pre></div></div> <h2 id="queries"> <a href="#queries" class="anchor-heading" aria-labelledby="queries"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Queries </h2> <p>DocStore‚Äôs <code class="language-plaintext highlighter-rouge">get</code> action retrieves a single document by its primary key. However, when you need to retrieve or manipulate multiple documents that match a condition, you can use queries.</p> <p>Queries allow you to:</p> <ul> <li>Retrieve all documents that match specific conditions.</li> <li>Delete or update documents in bulk based on criteria.</li> </ul> <p>The query interface is chainable and supports filtering and sorting (depending on driver support).</p> <p>DocStore can also optimize queries automatically. Based on your filter conditions, it attempts to determine whether a global secondary index (GSI) or a local secondary index (LSI) can be used to execute the query more efficiently. This helps reduce latency and improves performance.</p> <p>Queries support the following methods:</p> <ul> <li><strong>Where</strong>: Describes a condition on a document. You can ask whether a field is equal to, greater than, or less than a value. The ‚Äúnot equals‚Äù comparison isn‚Äôt supported, because it isn‚Äôt portable across providers.</li> <li><strong>OrderBy</strong>: Specifies the order of the resulting documents, by field and direction. For portability, you can specify at most one OrderBy, and its field must also be mentioned in a Where clause.</li> <li><strong>Limit</strong>: Limits the number of documents in the result.</li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">query</span><span class="o">();</span>
<span class="c1">// Apply filtering, sorting, etc.</span>
</code></pre></div></div> <p>(Depends on driver implementation.)</p> <h2 id="advanced-usage"> <a href="#advanced-usage" class="anchor-heading" aria-labelledby="advanced-usage"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Advanced Usage </h2> <h3 id="action-lists"> <a href="#action-lists" class="anchor-heading" aria-labelledby="action-lists"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Action Lists </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">ActionList</span> <span class="n">actions</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">getActions</span><span class="o">();</span>
<span class="n">actions</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">doc1</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="n">doc2</span><span class="o">).</span><span class="na">delete</span><span class="o">(</span><span class="n">doc3</span><span class="o">);</span>
<span class="n">actions</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>
</code></pre></div></div> <p>You can also chain operations directly using the fluent API with <code class="language-plaintext highlighter-rouge">enableAtomicWrites()</code> for atomic execution:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">client</span><span class="o">.</span><span class="na">getActions</span><span class="o">()</span>
    <span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="k">new</span> <span class="nc">Document</span><span class="o">(</span><span class="k">new</span> <span class="nc">Player</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mf">3.99f</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="s">"CA"</span><span class="o">)))</span>
    <span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="k">new</span> <span class="nc">Document</span><span class="o">(</span><span class="k">new</span> <span class="nc">Player</span><span class="o">(</span><span class="s">"Bob"</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mf">3.99f</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="s">"PT"</span><span class="o">)))</span>
    <span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="k">new</span> <span class="nc">Document</span><span class="o">(</span><span class="k">new</span> <span class="nc">Player</span><span class="o">(</span><span class="s">"Carol"</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mf">3.99f</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="s">"PA"</span><span class="o">)))</span>
    <span class="o">.</span><span class="na">enableAtomicWrites</span><span class="o">()</span>
    <span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="k">new</span> <span class="nc">Document</span><span class="o">(</span><span class="k">new</span> <span class="nc">Player</span><span class="o">(</span><span class="s">"Dave"</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mf">3.99f</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="s">"TX"</span><span class="o">)))</span>
    <span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="k">new</span> <span class="nc">Document</span><span class="o">(</span><span class="k">new</span> <span class="nc">Player</span><span class="o">(</span><span class="s">"Eve"</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mf">3.99f</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="s">"OR"</span><span class="o">)))</span>
    <span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="k">new</span> <span class="nc">Document</span><span class="o">(</span><span class="k">new</span> <span class="nc">Player</span><span class="o">(</span><span class="s">"Frank"</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mf">3.99f</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="s">"NJ"</span><span class="o">)))</span>
    <span class="o">.</span><span class="na">run</span><span class="o">();</span>
</code></pre></div></div> <h3 id="atomic-writes"> <a href="#atomic-writes" class="anchor-heading" aria-labelledby="atomic-writes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Atomic Writes: </h3> <p>If you want to write your documents atomically, just use the <code class="language-plaintext highlighter-rouge">enableAtomicWrites</code> as above and all the writes are this will be executed atomically.</p> <h3 id="close-the-client"> <a href="#close-the-client" class="anchor-heading" aria-labelledby="close-the-client"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Close the Client </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">client</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</code></pre></div></div> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
